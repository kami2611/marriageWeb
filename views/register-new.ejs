<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Your Muslim Rishta Profile | Find Muslim Spouse UK | D'amour Muslim Marriage</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Create your Muslim rishta profile today and find your perfect Muslim spouse in London, Leicester & UK. Join thousands of verified Muslim profiles for halal marriage, Islamic wedding and blessed Nikkah ceremony.">
  <meta name="keywords" content="create muslim rishta profile, find muslim spouse, muslim marriage UK, muslim matrimonial, online muslim marriage, halal marriage site, muslim rishta London, pakistani marriage Leicester, verified muslim profiles, islamic wedding, nikkah ceremony, muslim couple, best muslim marriage site, muslim matchmaking UK">
  <link rel="canonical" href="https://www.damourmuslim.com/register">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="manifest" href="/images/site.webmanifest">
  <meta name="theme-color" content="#E91E63">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.damourmuslim.com/register">
  <meta property="og:title" content="Create Muslim Rishta Profile | Find Your Perfect Muslim Spouse UK">
  <meta property="og:description" content="Join D'amour Muslim to create your rishta profile and find Muslim spouse for halal marriage. Connect with verified Muslim singles in London, Leicester across UK for Islamic wedding and Nikkah ceremony.">
  <meta property="og:image" content="https://www.damourmuslim.com/images/og-image-register.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://www.damourmuslim.com/register">
  <meta property="twitter:title" content="Create Muslim Rishta Profile | Find Perfect Muslim Spouse">
  <meta property="twitter:description" content="Start your journey to find Muslim spouse through verified rishta profiles. Join UK's trusted Muslim matrimonial platform for halal marriage and blessed Nikkah.">
  <meta property="twitter:image" content="https://www.damourmuslim.com/images/og-image-register.jpg">
  <link rel="stylesheet" href="/css/output.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Playfair+Display:wght@400;600;700&family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    .material-shadow {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .material-shadow-hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }

    .material-shadow-elevated {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .ripple {
      position: relative;
      overflow: hidden;
    }

    .ripple::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .ripple:active::before {
      width: 300px;
      height: 300px;
    }

    .gradient-bg {
      background: linear-gradient(135deg, #E91E63 0%, #673AB7 100%);
    }
  </style>
</head>
<% if (typeof isProd !== 'undefined' && isProd && !isAdmin) { %>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=<%= GA_ID %>"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', '<%= GA_ID %>');
</script>
<% } %>

<body class="bg-gray-50 font-['Roboto']">
  <header class="fixed top-0 left-0 right-0 bg-white material-shadow z-50">
    <div class="flex items-center justify-between px-6 h-16">
      <div class="flex items-center">
        <h1 class="text-2xl font-bold text-primary font-['Playfair_Display']">
          <a href="/" class="hover:text-pink-600 transition-colors duration-300 cursor-pointer">
            D'amour Muslim
          </a>
        </h1>
      </div>
      <div class="flex items-center gap-4">
        <a href="/login" class="px-6 py-2 border-2 border-primary text-primary hover:bg-primary hover:text-white transition-all duration-300 !rounded-button whitespace-nowrap ripple">
          Login
        </a>
      </div>
    </div>
  </header>

  <main class="pt-24 pb-16 min-h-screen">
    <div class="flex flex-col lg:flex-row">
      <!-- Left Side: Content Section with Background Image -->
      <div class="w-full lg:w-1/2 py-8 px-6 bg-cover bg-center bg-no-repeat relative" style="background-image: url('https://res.cloudinary.com/dhuc2plh0/image/upload/v1760555667/jeremy-wong-weddings-464ps_nOflw-unsplash_wov3ei.jpg');">
        <div class="absolute inset-0 bg-black/50"></div>
        <div class="relative z-10 flex items-center justify-center h-full">
          <div class="w-full px-6 py-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-4 font-['Playfair_Display'] lg:text-left">
              Create Your Muslim Rishta Profile & Find Your Perfect Muslim Spouse
            </h1>
            <p class="text-lg text-white mb-8 leading-relaxed lg:text-left">
              Join thousands of verified Muslim profiles across London, Leicester and the UK. Start your blessed journey toward halal marriage, Islamic wedding and a beautiful Nikkah ceremony.
            </p>

            <!-- Trust Indicators -->
            <div class="mt-8 lg:text-left">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-5 text-white">
                <div class="flex items-center gap-3 bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                  <div class="w-10 h-10 flex items-center justify-center text-primary bg-white rounded-full">
                    <i class="ri-shield-check-line text-xl"></i>
                  </div>
                  <div>
                    <span class="font-medium">Verified Muslim Profiles</span>
                    <p class="text-xs text-white/80 mt-1">Quality matches guaranteed</p>
                  </div>
                </div>
                <div class="flex items-center gap-3 bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                  <div class="w-10 h-10 flex items-center justify-center text-primary bg-white rounded-full">
                    <i class="ri-heart-2-line text-xl"></i>
                  </div>
                  <div>
                    <span class="font-medium">Halal Marriage Focus</span>
                    <p class="text-xs text-white/80 mt-1">Islamic values respected</p>
                  </div>
                </div>
                <div class="flex items-center gap-3 bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                  <div class="w-10 h-10 flex items-center justify-center text-primary bg-white rounded-full">
                    <i class="ri-map-pin-line text-xl"></i>
                  </div>
                  <div>
                    <span class="font-medium">UK Muslim Community</span>
                    <p class="text-xs text-white/80 mt-1">Across major UK cities</p>
                  </div>
                </div>
                <div class="flex items-center gap-3 bg-white/10 p-4 rounded-xl backdrop-blur-sm">
                  <div class="w-10 h-10 flex items-center justify-center text-primary bg-white rounded-full">
                    <i class="ri-time-line text-xl"></i>
                  </div>
                  <div>
                    <span class="font-medium">100% Free Registration</span>
                    <p class="text-xs text-white/80 mt-1">No hidden fees</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side: Form Section -->
      <div class="w-full lg:w-1/2 bg-gradient-to-br from-gray-50 to-gray-100">
        <div class="py-8 flex items-center justify-center h-full">
          <div class="w-full max-w-md px-6">
            <div class="bg-white rounded-2xl p-8 material-shadow">
              
              <!-- Parent Notice Section (Initial View) -->
              <div id="parentNotice" class="text-center">
                <div class="w-20 h-20 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-6">
                  <i class="ri-parent-line text-3xl text-white"></i>
                </div>
                
                <h2 class="text-2xl font-bold text-gray-800 font-['Playfair_Display'] mb-4">Important Notice</h2>
                
                <div class="bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6 text-left">
                  <div class="flex items-start gap-3">
                    <i class="ri-information-line text-amber-600 text-xl mt-0.5"></i>
                    <div>
                      <p class="text-gray-700 font-medium mb-2">This website is strictly for parents who want to create their son/daughter's profile.</p>
                      <p class="text-gray-600 text-sm">If you are a parent looking to find a suitable match for your child, please continue below.</p>
                    </div>
                  </div>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
                  <p class="text-gray-700 text-sm">
                    Creating a profile for yourself? Visit 
                    <a href="https://www.shadiamour.com/register" target="_blank" rel="noopener noreferrer" class="text-primary font-semibold hover:underline">
                      ShaadiAmour.com
                    </a>
                  </p>
                </div>

                <button type="button" id="continueAsParent" class="w-full py-3 px-6 bg-primary text-white font-semibold rounded-xl hover:bg-pink-600 transition-all duration-300 ripple material-shadow">
                  <span class="flex items-center justify-center gap-2">
                    <span>I am a Parent - Continue</span>
                    <i class="ri-arrow-right-line"></i>
                  </span>
                </button>
              </div>

              <!-- Registration Options (After clicking Continue) -->
              <div id="registrationOptions" class="hidden">
                <div class="text-center mb-8">
                  <div class="w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="ri-user-add-line text-2xl text-white"></i>
                  </div>
                  <h2 class="text-2xl font-bold text-gray-800 font-['Playfair_Display']">Create Your Profile Today</h2>
                  <p class="text-gray-600 mt-2">Choose your registration method</p>
                </div>

                <% if (typeof error !== 'undefined' && error) { %>
                <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                  <div class="flex items-center gap-2">
                    <i class="ri-error-warning-line text-red-500"></i>
                    <p class="text-red-600 text-sm font-medium"><%= error %></p>
                  </div>
                </div>
                <% } %>

                <!-- Google Sign Up -->
                <a href="/auth/google" class="w-full inline-flex items-center justify-center gap-3 px-6 py-3 border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 rounded-xl text-base font-medium mb-4">
                  <svg class="w-5 h-5" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                  </svg>
                  <span>Continue with Google</span>
                </a>

                <div class="flex items-center my-6">
                  <div class="flex-1 border-t border-gray-300"></div>
                  <span class="px-4 text-sm text-gray-500 bg-white">or register manually</span>
                  <div class="flex-1 border-t border-gray-300"></div>
                </div>

                <!-- Manual Registration Form -->
                <form id="registrationForm" method="POST" action="/register" class="space-y-4">
                  <div class="space-y-2">
                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address <span class="text-red-500">*</span></label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="ri-mail-line text-gray-400"></i>
                      </div>
                      <input type="email" id="email" name="email" required class="block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary text-gray-900 placeholder-gray-400 bg-white" placeholder="Enter your email address">
                    </div>
                  </div>

                  <!-- Email Verification Section -->
                  <div id="emailVerificationSection" class="hidden space-y-3">
                    <div class="flex gap-2">
                      <button type="button" id="sendCodeBtn" class="flex-1 py-2.5 px-4 bg-secondary text-white font-medium rounded-xl hover:bg-purple-700 transition-all duration-300 text-sm">
                        <i class="ri-mail-send-line mr-1"></i>
                        Send Verification Code
                      </button>
                    </div>
                    
                    <div id="verificationCodeWrapper" class="hidden space-y-2">
                      <label for="verificationCode" class="block text-sm font-medium text-gray-700">Verification Code <span class="text-red-500">*</span></label>
                      <div class="flex gap-2">
                        <div class="relative flex-1">
                          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="ri-key-2-line text-gray-400"></i>
                          </div>
                          <input type="text" id="verificationCode" name="verificationCode" maxlength="6" class="block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary text-gray-900 placeholder-gray-400 bg-white text-center tracking-widest font-mono" placeholder="Enter 4-digit code">
                        </div>
                        <button type="button" id="verifyCodeBtn" class="px-4 py-2.5 bg-green-500 text-white font-medium rounded-xl hover:bg-green-600 transition-all duration-300 text-sm">
                          Verify
                        </button>
                      </div>
                      <p id="codeError" class="hidden text-sm text-red-600"></p>
                      <p id="codeSentMessage" class="text-sm text-green-600"><i class="ri-check-line"></i> Code sent to your email. Please check your inbox.</p>
                    </div>
                    
                    <!-- Email Verified Badge -->
                    <div id="emailVerifiedBadge" class="hidden flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl">
                      <i class="ri-checkbox-circle-fill text-green-500 text-xl"></i>
                      <span class="text-green-700 font-medium">Email Verified</span>
                    </div>
                  </div>
                  
                  <input type="hidden" id="emailVerified" name="emailVerified" value="false">

                  <div class="space-y-2">
                    <label for="password" class="block text-sm font-medium text-gray-700">Password <span class="text-red-500">*</span></label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="ri-lock-line text-gray-400"></i>
                      </div>
                      <input type="password" id="password" name="password" required minlength="5" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary text-gray-900 placeholder-gray-400 bg-white" placeholder="Create a password (min 5 characters)">
                      <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center" data-target="password">
                        <i class="ri-eye-off-line text-gray-400 hover:text-gray-600"></i>
                      </button>
                    </div>
                  </div>

                  <div class="space-y-2">
                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password <span class="text-red-500">*</span></label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="ri-lock-line text-gray-400"></i>
                      </div>
                      <input type="password" id="confirmPassword" name="confirmPassword" required minlength="5" class="block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary text-gray-900 placeholder-gray-400 bg-white" placeholder="Confirm your password">
                      <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-3 flex items-center" data-target="confirmPassword">
                        <i class="ri-eye-off-line text-gray-400 hover:text-gray-600"></i>
                      </button>
                    </div>
                    <p id="passwordError" class="hidden text-sm text-red-600 mt-1"></p>
                  </div>

                  <button type="submit" id="submitBtn" disabled class="w-full py-3 px-6 bg-gray-400 text-white font-semibold rounded-xl cursor-not-allowed transition-all duration-300 ripple material-shadow">
                    Create Account
                  </button>
                  <p id="submitHelp" class="text-xs text-gray-500 text-center">Please verify your email first to create an account</p>
                </form>

                <div class="text-center text-sm mt-6">
                  <span class="text-gray-600">Already have an account?</span>
                  <a href="/login" class="font-medium text-primary hover:text-pink-600 transition-colors duration-300 ml-1">Login here</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <%- include('partials/footer') %>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const parentNotice = document.getElementById('parentNotice');
      const registrationOptions = document.getElementById('registrationOptions');
      const continueBtn = document.getElementById('continueAsParent');
      const form = document.getElementById('registrationForm');
      const emailInput = document.getElementById('email');
      const password = document.getElementById('password');
      const confirmPassword = document.getElementById('confirmPassword');
      const passwordError = document.getElementById('passwordError');
      const submitBtn = document.getElementById('submitBtn');
      const submitHelp = document.getElementById('submitHelp');
      
      // Email verification elements
      const emailVerificationSection = document.getElementById('emailVerificationSection');
      const sendCodeBtn = document.getElementById('sendCodeBtn');
      const verificationCodeWrapper = document.getElementById('verificationCodeWrapper');
      const verificationCodeInput = document.getElementById('verificationCode');
      const verifyCodeBtn = document.getElementById('verifyCodeBtn');
      const codeError = document.getElementById('codeError');
      const codeSentMessage = document.getElementById('codeSentMessage');
      const emailVerifiedBadge = document.getElementById('emailVerifiedBadge');
      const emailVerifiedInput = document.getElementById('emailVerified');
      
      let isEmailVerified = false;
      let currentVerificationCode = null;
      let resendCooldownTimer = null;

      // Resend cooldown function
      function startResendCooldown() {
        let seconds = 60;
        sendCodeBtn.disabled = true;
        
        // Clear any existing timer
        if (resendCooldownTimer) {
          clearInterval(resendCooldownTimer);
        }
        
        // Update button text with countdown
        sendCodeBtn.innerHTML = `<i class="ri-time-line mr-1"></i> Resend in ${seconds}s`;
        
        resendCooldownTimer = setInterval(() => {
          seconds--;
          if (seconds <= 0) {
            clearInterval(resendCooldownTimer);
            sendCodeBtn.disabled = false;
            sendCodeBtn.innerHTML = '<i class="ri-refresh-line mr-1"></i> Resend Code';
          } else {
            sendCodeBtn.innerHTML = `<i class="ri-time-line mr-1"></i> Resend in ${seconds}s`;
          }
        }, 1000);
      }

      // Show registration options when parent clicks continue
      continueBtn.addEventListener('click', function() {
        parentNotice.classList.add('hidden');
        registrationOptions.classList.remove('hidden');
      });

      // Email input validation - show verification section when valid email entered
      emailInput.addEventListener('input', function() {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (emailRegex.test(this.value)) {
          emailVerificationSection.classList.remove('hidden');
          // Reset verification state when email changes
          if (isEmailVerified) {
            resetVerificationState();
          }
        } else {
          emailVerificationSection.classList.add('hidden');
        }
      });

      // Send verification code
      sendCodeBtn.addEventListener('click', async function() {
        const email = emailInput.value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (!emailRegex.test(email)) {
          alert('Please enter a valid email address');
          return;
        }

        // Disable button and show loading
        sendCodeBtn.disabled = true;
        sendCodeBtn.innerHTML = '<i class="ri-loader-4-line animate-spin mr-1"></i> Sending...';

        try {
          const response = await fetch('/api/send-verification-code', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
          });

          const data = await response.json();

          if (data.success) {
            // Show verification code input
            verificationCodeWrapper.classList.remove('hidden');
            codeSentMessage.classList.remove('hidden');
            
            // Start 60-second cooldown
            startResendCooldown();
            
            // Focus on code input
            verificationCodeInput.focus();
          } else {
            alert(data.error || 'Failed to send verification code. Please try again.');
            sendCodeBtn.innerHTML = '<i class="ri-mail-send-line mr-1"></i> Send Verification Code';
            sendCodeBtn.disabled = false;
          }
        } catch (error) {
          console.error('Error sending code:', error);
          alert('Failed to send verification code. Please try again.');
          sendCodeBtn.innerHTML = '<i class="ri-mail-send-line mr-1"></i> Send Verification Code';
          sendCodeBtn.disabled = false;
        }
      });

      // Verify code
      verifyCodeBtn.addEventListener('click', async function() {
        const email = emailInput.value.trim();
        const code = verificationCodeInput.value.trim();

        if (!code || code.length < 4) {
          codeError.textContent = 'Please enter the verification code';
          codeError.classList.remove('hidden');
          return;
        }

        // Disable button and show loading
        verifyCodeBtn.disabled = true;
        verifyCodeBtn.innerHTML = '<i class="ri-loader-4-line animate-spin"></i>';

        try {
          const response = await fetch('/api/verify-email-code', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, code })
          });

          const data = await response.json();

          if (data.success) {
            // Email verified!
            isEmailVerified = true;
            emailVerifiedInput.value = 'true';
            
            // Update UI
            verificationCodeWrapper.classList.add('hidden');
            sendCodeBtn.classList.add('hidden');
            codeSentMessage.classList.add('hidden');
            emailVerifiedBadge.classList.remove('hidden');
            
            // Lock email input
            emailInput.readOnly = true;
            emailInput.classList.add('bg-gray-100');
            
            // Enable submit button
            enableSubmitButton();
            
            codeError.classList.add('hidden');
          } else {
            codeError.textContent = data.error || 'Invalid verification code. Please try again.';
            codeError.classList.remove('hidden');
            verifyCodeBtn.disabled = false;
            verifyCodeBtn.innerHTML = 'Verify';
          }
        } catch (error) {
          console.error('Error verifying code:', error);
          codeError.textContent = 'Failed to verify code. Please try again.';
          codeError.classList.remove('hidden');
          verifyCodeBtn.disabled = false;
          verifyCodeBtn.innerHTML = 'Verify';
        }
      });

      function resetVerificationState() {
        isEmailVerified = false;
        emailVerifiedInput.value = 'false';
        verificationCodeWrapper.classList.add('hidden');
        emailVerifiedBadge.classList.add('hidden');
        sendCodeBtn.classList.remove('hidden');
        sendCodeBtn.innerHTML = '<i class="ri-mail-send-line mr-1"></i> Send Verification Code';
        sendCodeBtn.disabled = false;
        codeSentMessage.classList.add('hidden');
        codeError.classList.add('hidden');
        verificationCodeInput.value = '';
        emailInput.readOnly = false;
        emailInput.classList.remove('bg-gray-100');
        disableSubmitButton();
      }

      function enableSubmitButton() {
        submitBtn.disabled = false;
        submitBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
        submitBtn.classList.add('bg-primary', 'hover:bg-pink-600');
        submitHelp.classList.add('hidden');
      }

      function disableSubmitButton() {
        submitBtn.disabled = true;
        submitBtn.classList.add('bg-gray-400', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-primary', 'hover:bg-pink-600');
        submitHelp.classList.remove('hidden');
      }

      // Password validation
      confirmPassword.addEventListener('input', function() {
        if (this.value && password.value !== this.value) {
          this.classList.add('border-red-300');
          this.classList.remove('border-gray-300');
          passwordError.textContent = 'Passwords do not match';
          passwordError.classList.remove('hidden');
        } else {
          this.classList.remove('border-red-300');
          this.classList.add('border-gray-300');
          passwordError.classList.add('hidden');
        }
      });

      // Form submission validation
      form.addEventListener('submit', function(e) {
        if (!isEmailVerified) {
          e.preventDefault();
          alert('Please verify your email first');
          return;
        }

        if (password.value !== confirmPassword.value) {
          e.preventDefault();
          passwordError.textContent = 'Passwords do not match';
          passwordError.classList.remove('hidden');
          confirmPassword.classList.add('border-red-300');
          return;
        }

        if (password.value.length < 5) {
          e.preventDefault();
          passwordError.textContent = 'Password must be at least 5 characters';
          passwordError.classList.remove('hidden');
          return;
        }
      });

      // Password toggle functionality
      document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', function() {
          const targetId = this.getAttribute('data-target');
          const passwordInput = document.getElementById(targetId);
          const icon = this.querySelector('i');

          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.className = 'ri-eye-line text-gray-400 hover:text-gray-600';
          } else {
            passwordInput.type = 'password';
            icon.className = 'ri-eye-off-line text-gray-400 hover:text-gray-600';
          }
        });
      });
    });
  </script>
</body>

</html>
